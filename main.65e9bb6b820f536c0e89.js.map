{"version":3,"sources":["webpack:///./apiService.js","webpack:///./index.js","webpack:///./templates/image-card.hbs"],"names":["axios","defaults","baseURL","imageApiService","this","searchQuery","page","fetchImages","get","then","response","data","hits","resetPage","newQuery","refs","searchForm","document","getElementById","imageListRoot","querySelector","sentinel","appendImagesMarkup","markup","imageCardTpl","insertAdjacentHTML","addEventListener","e","preventDefault","innerHTML","clearImagesList","query","currentTarget","elements","value","alert","options","threshold","root","rootMargin","IntersectionObserver","entries","forEach","entry","isIntersecting","console","log","observe","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.65e9bb6b820f536c0e89.js","sourcesContent":["import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\nconst YOUR_ACCESS_KEY = '21772018-ea8d686ef9c180e6d9f46e4e4';\r\n\r\nexport default class ImageApiService {\r\n    constructor() {\r\n        this.searchQuery = '';\r\n        this.page = 1;\r\n    }\r\n\r\n    fetchImages() {\r\n        return axios\r\n            .get(`?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${YOUR_ACCESS_KEY}`)\r\n            .then(response => {\r\n                this.page += 1;\r\n                return response.data.hits;\r\n            })\r\n    }\r\n\r\n    get query() {\r\n        return this.searchQuery;\r\n    }\r\n\r\n    set query(newQuery) {\r\n        this.searchQuery = newQuery;\r\n    }\r\n\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n}","import './styles.css';\nimport imageCardTpl from './templates/image-card.hbs';\nimport ImageApiService from './apiService';\n\nconst imageApiService = new ImageApiService();\n\nconst refs = {\n    searchForm: document.getElementById('search-form'),\n    imageListRoot: document.querySelector('ul'),\n    // loadMoreImg: document.querySelector('[data-action=\"load-more\"]'),\n    sentinel: document.getElementById('sentinel'),\n}\n\nrefs.searchForm.addEventListener('submit', onSearch)\n// refs.loadMoreImg.addEventListener('click', onLoadMore)\n\nfunction onSearch(e) {\n    e.preventDefault();\n\n    clearImagesList();\n    imageApiService.query = e.currentTarget.elements.query.value;\n\n    if (imageApiService.query === '') {\n        return alert('Введите ваш запрос на поиск картинки!')\n    }\n\n    imageApiService.resetPage();\n    imageApiService.fetchImages().then(appendImagesMarkup)\n}\n\n// async function onLoadMore() {\n//     try {\n//        await imageApiService.fetchImages().then(appendImagesMarkup)\n//     } catch {\n//         console.error();\n//     }\n//     onScroll();\n// }\n\nfunction appendImagesMarkup(response) {\n    const markup = imageCardTpl(response);\n    refs.imageListRoot.insertAdjacentHTML('beforeend', markup)\n}\n\nfunction clearImagesList() {\n    refs.imageListRoot.innerHTML = '';\n}\n\n// function onScroll() {\n//     // refs.loadMoreImg.scrollIntoView({\n//     //     behavior: 'smooth',\n//     //     block: 'end',\n//     // });\n\n//     window.scrollTo({\n//         top: document.documentElement.scrollHeight,\n//         behavior: 'smooth',\n//     })\n// }\n\nconst onEntry = entries => {\n    entries.forEach(entry => {\n        if (entry.isIntersecting && imageApiService.query !== '') {\n            console.log('Грузим дальше')\n            imageApiService.fetchImages().then(appendImagesMarkup)\n        }\n    })\n}\nconst options = {\n    threshold: 1,\n    root: document,\n    rootMargin: '200px',\n}\nconst observer = new IntersectionObserver(onEntry, options)\n\nobserver.observe(refs.sentinel);","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div>\\r\\n        <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":17},\"end\":{\"line\":4,\"column\":33}}}) : helper)))\n    + \" alt=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":38},\"end\":{\"line\":4,\"column\":46}}}) : helper)))\n    + \" width=\\\"320\\\" />\\r\\n        \\r\\n        \\r\\n    </div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":26,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});"],"sourceRoot":""}